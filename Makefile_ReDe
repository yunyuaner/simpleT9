CXX = mipsel-elf-g++
AR = mipsel-elf-ar

TARGET = libsimpleT9.a

all: $(TARGET)

CPPFLAGS = -D_GLIBCXX_USE_C99 -D__mips_abi_n32__ -D__multi_core__ \
		-DCPU=MIPS64 -G0 -D__loongson2_64__ -DREWORKS_RTP -D__KERNEL__	\
		-D_LOONGSON3A_780E_ -DUSE_REWORKS_IPNET_69 -D__WITH_GJ_PROTECT__ \
		-D__reworks__ -D__reworks__ -D_GS464_

CFLAGS = -O0 -g -Wall -c -fmessage-length=0 -std=c++0x -mabi=n32 -march=mips64r2 -mel -fPIC -mabicalls
 
INCLUDES = -I"${REDE_HOME}/user resource/pci_config/runtimelib/h" \
	-I"${REDE_HOME}/user resource/loongson3a_7a1000_bsp_config/runtimelib/LOONGSON3A_SMP/h"	\
	-I"${REDE_HOME}/user resource/io_config/runtimelib/h"	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport"	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport/freetype"	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport/freetype/config"	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport/iconv" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport/jpeg" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport/png" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport/tiff" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refbsupport/zlib" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refb" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refb/direct"	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refb/fusion" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/refb/fusion/shm" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/qt/QtGui" 	\
	-I"${REDE_HOME}/user resource/ipnet_config/runtimelib/h" 	\
	-I"${REDE_HOME}/resource/reworks_config/runtimelib/h" 	\
	-I"${REDE_HOME}/resource/reworks_config/runtimelib/LOONGSON3A_SMP/h"	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/qt/QtPlatformSupport"	\
	-I"${REDE_HOME}/user resource/vx_config/runtimelib/h" 	\
	-I"${REDE_HOME}/user resource/loongson3a_7a1000_csp_config/runtimelib/h/mmu"	\
	-I"${REDE_HOME}/user resource/loongson3a_7a1000_csp_config/runtimelib/h/mmu/arch/mips/h"	\
	-I"${REDE_HOME}/user resource/loongson3a_7a1000_csp_config/runtimelib/h/mmu/h" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/qt" 	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/qt/QtCore"	\
	-I"${REDE_HOME}/user resource/graphics_config/runtimelib/h/qt/QtWidgets" 

HEADERS += libsimpleT9/ch423/kbd_ch423.h \
           libsimpleT9/ch423/key_codes.h \
           libsimpleT9/ime/globals.h \
           libsimpleT9/ime/key.h \
           libsimpleT9/ime/keyboard.h \
           libsimpleT9/ime/pager.h \
           libsimpleT9/ime/ui.h \
           libsimpleT9/data/utf8_string/src/utf8_iterator.hpp \
           libsimpleT9/data/utf8_string/src/utf8_string.hpp

SOURCES += libsimpleT9/data/vocabulary.cpp \
           libsimpleT9/ime/globals.cpp \
           libsimpleT9/ime/key.cpp \
           libsimpleT9/ime/keyboard.cpp \
           libsimpleT9/ime/pager.cpp \
           libsimpleT9/ime/ui.cpp \
           libsimpleT9/data/utf8_string/src/utf8_iterator.cpp \
           libsimpleT9/data/utf8_string/src/utf8_string.cpp \

OBJECTS = $(patsubst %.cpp,%.o,$(SOURCES))

VPATH = libsimpleT9/ch423 libsimpleT9/data libsimpleT9/ime libsimpleT9/data/utf8_string/src

%.o: %.cpp
	$(CXX) $(CFLAGS) $(CPPFLAGS) $(INCLUDES) -c $^ -o $@
	
$(TARGET): $(OBJECTS)
	$(AR) rcs $@ $^

.PHONY: all clean

clean:
	@rm -rf $(OBJECTS) $(TARGET)